{% extends '../customer/base.html'%}

{% block title %} Résultat de Recherche {% endblock %}

{% block content %}
{% if not request.user.is_authenticated %}
<h2> N'étant pas authentifié, vous ne pourrez pas enregistrer votre recherche</h2>
{% endif %}

<ul id = "search_results">
    {% for result in search_results %}
    <div class="card" style="width: 18rem;">
        <a href="{% url 'food_items:product_details' result.code %}" id="{{result.code}}">
            <img class="card-img-top" src='{{ result.image_url }}'
                id="{{result.code}}" alt="Image Produit">
        </a>
        <div class="card-body">
            <a>Name: {{ result.name }}, 
                Nutriscore: {{result.nutrition_score}}</a>
            {% if request.user.is_authenticated %}
            <form action = "{% url 'food_items:record_product' result.code %}" method="get">
            <input type="submit" value="Sauvegarder" id="record-product-{{ result.code }}">
            </form>
            {% endif %}
    </div>

    {% empty %}
        <li><h2 id="error_message">Désolé, nous n'avons pas de résultat correspondant</h2></li>
    {% endfor %}

</ul>

{% endblock %}
